# 外部数据ROC曲线验证与可视化

## 数据准备

### 数据源

- **文件名**: `gene.csv`
- **内容**: 包含基因表达数据，其中第一列为样本名称，后续列为基因数据。

### 数据读取

使用 `read.csv` 函数读取 `gene.csv` 文件。

### 数据分组

数据分为两组：

- 前 15 个样本（索引 1 到 15）为一组。
- 后 8 个样本（索引 16 到 23）为一组。

---

## 分析流程

### 数据预处理

#### 函数: `prepare_data`

**功能**:

1. 读取数据文件。
2. 根据样本数量生成标签列（`label`），其中 Case 标签为 `1`，Control 标签为 `0`。
3. 删除包含缺失值的行。

**输出**: 返回预处理后的数据框，包含基因表达值和标签列。

---

### 数据验证

#### 函数: `validate_data`

**功能**:

1. 检查数据中是否包含指定的基因列。
2. 验证基因列是否为数值型。
3. 确认数据中是否存在标签列（`label`）。

**输出**: 如果数据不符合要求，将抛出错误提示。

---

## 可视化

### ROC 曲线绘制

使用 `pROC` 包绘制 ROC 曲线。

**功能**:

1. 计算每个基因的 ROC 曲线。
2. 绘制多个基因的 ROC 曲线在同一图中。

**参数**:

- `ncol = 2`: 每行显示两条 ROC 曲线。

**输出文件**:

- **文件名**: `roc_curves.png`
- **内容**: 指定基因的 ROC 曲线图。

---

## 输出文件

### ROC 曲线文件

- **文件名**: `roc_curves.png`
- **内容**: 指定基因（`SP1`, `FOXO1`, `ESR1`, `MAPK1`）的 ROC 曲线图。

---

## 备注

1. 所有输出文件默认保存在当前工作目录。
2. 如果绘图出现乱码，可以通过调整图片的 `width` 和 `height` 参数解决。
